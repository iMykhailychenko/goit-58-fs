"use strict";(self.webpackChunkgoit_58_fs=self.webpackChunkgoit_58_fs||[]).push([[128],{2128:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var s=n(9439),r=n(2791),a=n(3433),c=n(1413),o=n(3263),i=n(1694),l=n.n(i),u=n(9085),m=n(184),d=function(t){var e=t.setComments,n=(0,r.useState)(!1),i=(0,s.Z)(n,2),d=i[0],f=i[1],h=(0,r.useState)(""),p=(0,s.Z)(h,2),b=p[0],g=p[1];return(0,m.jsxs)("form",{action:"#",className:"my-5",onSubmit:function(t){t.preventDefault(),b.trim()?(f(!0),o.Z.post("https://goit-fs.netlify.app/api/posts/".concat(10,"/comments"),{content:b}).then((function(t){u.Am.success("You have successfully created a new comment!"),e((function(e){return(0,c.Z)((0,c.Z)({},e),{},{data:[t].concat((0,a.Z)(e.data))})})),g("")})).catch((function(){u.Am.error("Something went wrong!")})).finally((function(){return f(!1)}))):u.Am.error("Fill all required fields!")},children:[(0,m.jsxs)("label",{className:"d-block form-label",children:[(0,m.jsx)("p",{children:"Post content"}),(0,m.jsx)("textarea",{rows:"5",value:b,onChange:function(t){return g(t.target.value)},className:"form-control",placeholder:"Write your feedback"})]}),(0,m.jsxs)("button",{type:"submit",className:l()("btn btn-primary my-2",d?"disabled":""),children:[d&&(0,m.jsx)("span",{className:"spinner-grow spinner-grow-sm mr-2"}),"Submit"]})]})},f=n(9353),h=n(7689),p=function(t){var e,n=t.comments,a=t.setComments,i=(0,h.UO)().postId,l=(0,r.useState)(!0),d=(0,s.Z)(l,2),p=d[0],b=d[1],g=(0,r.useCallback)((function(){return o.Z.get("https://goit-fs.netlify.app/api/posts/".concat(i,"/comments")).then(a).catch((function(){u.Am.error("Something went wrong!")}))}),[i,a]);(0,r.useEffect)((function(){b(!0),g().finally((function(){return b(!1)}))}),[g]);return p?(0,m.jsx)("div",{className:"spinner-border text-primary",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.length?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("ul",{className:"list-group",children:n.data.map((function(t){return(0,m.jsxs)("li",{className:"list-group-item list-group-item-action py-4",children:[(0,m.jsx)("div",{className:"d-flex w-100 justify-content-between",children:(0,m.jsx)("small",{children:(0,f.Z)(new Date(t.created_at),new Date,{addSuffix:!0})})}),(0,m.jsx)("div",{className:"mb-4 mt-3",dangerouslySetInnerHTML:{__html:t.content.replace(/\n/g,"<br/>")}}),(0,m.jsxs)("div",{className:"btn-group",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return e=t.id,void o.Z.delete("http://70.34.201.18:8000/comments/".concat(e)).then((function(){a((function(t){return(0,c.Z)((0,c.Z)({},t),{},{data:t.data.filter((function(t){return t.id!==e}))})})),u.Am.success("You have successfully deleted your comment!")})).catch((function(){u.Am.error("Something went wrong!")}));var e},children:"Delete comment"}),(0,m.jsx)("button",{type:"button",className:"btn btn-outline-primary",children:"Edit comment"})]})]},t.id)}))})}):(0,m.jsx)("p",{children:"No comments yet!"})},b=function(){var t=(0,r.useState)(null),e=(0,s.Z)(t,2),n=e[0],a=e[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d,{setComments:a}),(0,m.jsx)(p,{comments:n,setComments:a})]})}}}]);
//# sourceMappingURL=128.7b4034c2.chunk.js.map