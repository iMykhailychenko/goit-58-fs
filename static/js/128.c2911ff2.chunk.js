"use strict";(self.webpackChunkgoit_58_fs=self.webpackChunkgoit_58_fs||[]).push([[128],{2128:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s=n(9439),r=n(2791),c=n(3433),a=n(1413),o=n(3263),i=n(1694),l=n.n(i),u=n(9085),m=n(8393),d=n(184),f=function(e){var t=e.setComments,n=(0,r.useState)(!1),i=(0,s.Z)(n,2),f=i[0],h=i[1],p=(0,r.useState)(""),b=(0,s.Z)(p,2),x=b[0],g=b[1];return(0,d.jsxs)("form",{action:"#",className:"my-5",onSubmit:function(e){e.preventDefault(),x.trim()?(h(!0),o.Z.post("".concat(m._,"/posts/").concat(10,"/comments"),{content:x}).then((function(e){u.Am.success("You have successfully created a new comment!"),t((function(t){return(0,a.Z)((0,a.Z)({},t),{},{data:[e].concat((0,c.Z)(t.data))})})),g("")})).catch((function(){u.Am.error("Something went wrong!")})).finally((function(){return h(!1)}))):u.Am.error("Fill all required fields!")},children:[(0,d.jsxs)("label",{className:"d-block form-label",children:[(0,d.jsx)("p",{children:"Post content"}),(0,d.jsx)("textarea",{rows:"5",value:x,onChange:function(e){return g(e.target.value)},className:"form-control",placeholder:"Write your feedback"})]}),(0,d.jsxs)("button",{type:"submit",className:l()("btn btn-primary my-2",f?"disabled":""),children:[f&&(0,d.jsx)("span",{className:"spinner-grow spinner-grow-sm mr-2"}),"Submit"]})]})},h=n(9353),p=n(7689),b=function(e){var t,n=e.comments,c=e.setComments,i=(0,p.UO)().postId,l=(0,r.useState)(!0),f=(0,s.Z)(l,2),b=f[0],x=f[1],g=(0,r.useCallback)((function(){return o.Z.get("".concat(m._,"/posts/").concat(i,"/comments")).then(c).catch((function(){u.Am.error("Something went wrong!")}))}),[i,c]);(0,r.useEffect)((function(){x(!0),g().finally((function(){return x(!1)}))}),[g]);return b?(0,d.jsx)("div",{className:"spinner-border text-primary",children:(0,d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.length?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("ul",{className:"list-group",children:n.data.map((function(e){return(0,d.jsxs)("li",{className:"list-group-item list-group-item-action py-4",children:[(0,d.jsx)("div",{className:"d-flex w-100 justify-content-between",children:(0,d.jsx)("small",{children:(0,h.Z)(new Date(e.created_at),new Date,{addSuffix:!0})})}),(0,d.jsx)("div",{className:"mb-4 mt-3",dangerouslySetInnerHTML:{__html:e.content.replace(/\n/g,"<br/>")}}),(0,d.jsxs)("div",{className:"btn-group",children:[(0,d.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return t=e.id,void o.Z.delete("http://70.34.201.18:8000/comments/".concat(t)).then((function(){c((function(e){return(0,a.Z)((0,a.Z)({},e),{},{data:e.data.filter((function(e){return e.id!==t}))})})),u.Am.success("You have successfully deleted your comment!")})).catch((function(){u.Am.error("Something went wrong!")}));var t},children:"Delete comment"}),(0,d.jsx)("button",{type:"button",className:"btn btn-outline-primary",children:"Edit comment"})]})]},e.id)}))})}):(0,d.jsx)("p",{children:"No comments yet!"})},x=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],c=t[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f,{setComments:c}),(0,d.jsx)(b,{comments:n,setComments:c})]})}}}]);
//# sourceMappingURL=128.c2911ff2.chunk.js.map